###  Лекция по теме "Средство визуализации Grafana"
[1](https://grafana.com/grafana/dashboards/)
[2](https://grafana.com/docs/grafana/latest/auth/)
[3](https://grafana.com/grafana/plugins/)

Сергей
БывшевСергей Бывшев
Ведущий инженер автоматизации в "Метр
квадратный"
Сергей Бывшев

### 2План занятия
1. Введение
2. Источники данных
3. Panels
4. Dashboards
5. Alerting
6. Итоги
7. Домашнее задание

### 3Введение

### 4Введение
Grafana является самой популярной в мире технологией визуализации,
используемой для создания панелей мониторинга.
Поддерживает множество источников данных.
Имеет встроенный функционал оповещений (алёртинга) на пороговые
события временных рядов.
Важно! Grafana не является системой для сбора данных. Она позволяет
только визуализировать данные, находящиеся в сторонней системе
хранения или мониторинга.

### 5Введение
Взято с сайта: habr.com
6Источники данных
7Источники данных
Grafana может визуализировать данные из следующих
источников:
AWS CloudWatch
Azure Monitor
Elasticsearch
Google Cloud Monitoring
Graphite
InﬂuxDB
● Loki
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
MSSQL
MySQL
OpenTSDB
PostgreSQL
Prometheus
Jaeger
Zipkin
Tempo
Testdata
8Источники данных
Для добавления нового источника данных перейдите в панель
конфигурации (Conﬁguration) и выберите в выпадающем списке:
“Data Sources”.
Взято с сайта: grafana.com
9Источники данных
Нажмите на зеленую кнопку “Add data sources”:
Взято с сайта: grafana.com
10Источники данных
Введите параметры вашего источника данных:
● Название
● Тип источника данных
● Его сетевой адрес
● И способы доступа, если необходима авторизация
Взято с сайта: grafana.com
11Panels
12Panels
Panels - это базовый инструмент визуализации в Grafana. Panel позволяет
вам гибко настроить визуализацию данных из выбранного источника.
Каждая Panel имеет свой синтаксический инструмент доступа к данным,
в зависимости от выбранного источника данных. Например, для PostgreSQL -
это SQL, а для Prometheus - это PromQL.
Данные, представленные в визуализации, можно изменять, путём
применения имеющихся в Grafana базовых преобразователей.
Также вы можете настроить параметры оповещения для данных,
визуализированных на Panel.
13Panels
Преобразователь
Описание
All nulls истина, когда все значения равны null
All zeros истина, когда все значения равны 0
Change count
количество раз изменения значения поля
Count количество значений в поле
Delta совокупное изменение стоимости
Difference
Difference percent
разница между первым и последним значением поля
процентное изменение между первым и последним значением поля
Distinct count количество уникальных значений в поле
First (not null) Первое не null значение в поле
Max
Mean
Min
Min (above zero)
Range
максимальное значение поля
среднее значение всех значений в поле
минимальное значение поля
минимальное положительное значение поля
разница между максимальным и минимальным значениями поля
Step минимальный интервал между значениями поля
Total сумма всех значений в поле
14Panels
Взято с сайта: grafana.com
15Panels
Взято с сайта: grafana.com
16Dashboards
17Dashboards
Dashboards - это объединение набора панелей, расположенных в один или
несколько рядов.
Одна Dashboard может содержать Panels, подключенным к разным
источникам данным, например Prometheus и InﬂuxDB.
Dashboards позволяет указывать временной период, за который необходимо
визуализировать данные на Panels. Также возможно указать частоту
обновления данных на Panels, при отображении данных в real-time.
Также возможна настройка шаблонизации отображения на панелях.
Например, один Dashboard может показывать данные с разных
серверов/сервисов и позволять переключаться между ними.
18Dashboards
1.
2.
3.
4.
5.
Быстрое изменение временного диапазона отображения
Меню для ручного выбора временного промежутка визуализации
Ручное обновление данных
Panel с визуализацией данных
Легенда для Panel
Взято с сайта: grafana.com
19Dashboards
1.
2.
3.
4.
5.
6.
7.
Основное меню Grafana
Выпадающее меню переключения Dashboard
Добавление новой Panel на Dashboard
Добавление Panel в избранное, для быстрого доступа
Получить ссылку на Dashboard для публикации
Сохранить примененные изменения к Dashboard
Доступ к настройкам текущей Dashboard
Взято с сайта: grafana.com
20Alerting
21Alerting
С помощью Grafana вы можете настроить оповещения о событиях,
в соответствии с настроенными критериями в выбранные каналы.
Оповещения настраиваются для каждой Panels.
Правило оповещения - это некоторый запрос, результат которого есть
бинарное булево значение.
На одну Panel можно настраивать несколько правил оповещения.
Grafana также предоставляет настройку поведения при отсутствии данных,
когда невозможно произвести расчет запроса правила оповещения.
22Alerting
Список возможных каналов оповещения Grafana
(можно назначать несколько каналов для одного правила):
●
●
●
●
●
●
●
●
●
●
●
DingDing
Discord
Email
Google Hangouts
Hipchat
Kafka
Line
Microsoft Teams
OpsGenie
PagerDuty
Prometheus Alertmanager
●
●
●
●
●
●
●
●
Sensu
Sensu GO
Slack
Telegram
Threema
VictorOps
Webhook
Zenduty
23Alerting
Для добавления канала нотификации необходимо:
●
●
●
●
Выбрать в меню Grafana значок с эмблемой колокольчика
Нажать на меню Notiﬁcation channels
Нажать на кнопку Add channel
Заполнить поля настройки канала оповещения:
○
○
○
○
○
○
Name: название канала оповещения
Type: выбрать канал оповещения из списка
Default: назначить этот канал по умолчанию
Include image: присылать с оповещениям скриншоты графика
Disable resolve manager: убирает функционал ручного изменения
состояния события из оповещения
Send reminder: осуществлять повтор оповещения, при отсутствии
изменения состояния события
● Заполнить сетевые свойства канала и нажать Save, либо Send test
для тестирования канала оповещения
24Alerting
Взято с сайта: blog.knoldus.com
Взято с сайта: medium.com
25Alerting
Пример правила оповещения (среднее значение за 15 последних минут
менее 14 единиц):
Взято с сайта: grafana.com
Пример настроенного правила в Grafana (при отсутствии данных, происходит
оповещение о событии “No Data”):
Взято с сайта: grafana.com
26Alerting
Подключение и изменение оповещения производится на вкладке Alert
при настройке Panel:
Взято с сайта: grafana.com
27Alerting
Пример оповещения в мессенджер Slack:
Взято с сайта: grafana.com
28Итоги
29Итоги
В данной лекции мы узнали:
● Что такое инструмент Grafana
● Из каких элементов состоит визуализация мониторинга
● Как подключить источник данных к Grafana
● Как настроить каналы нотификации
● Как настроить оповещения в Grafana
30Домашнее задание
Давайте посмотрим ваше домашнее задание.
● Вопросы по домашней работе задавайте в чате мессенджера Slack.
● Задачи можно сдавать по частям.
● Зачёт по домашней работе проставляется после того, как приняты
все задачи.
31Задавайте вопросы и
пишите отзыв о лекции!
Сергей Бывшев
Сергей Бывшев
